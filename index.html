<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  <link rel="stylesheet/less" type="text/css" href="styles.less" />
  <script>less = { env: 'development' };</script>
  <script src="less.js-master/dist/less.js" type="text/javascript"></script>
  <script>less.watch();</script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;800&display=swap" rel="stylesheet">

  <title>Frontend Mentor | Advice generator app</title>
</head>

<body onload="fetchAdvice()">
  <main>
    <p>ADVICE #<span id="adviceId"></span></p>
    <p id="advice" class="quote"></p>
    <picture>
      <source media="(max-width: 768px)" srcset="images/pattern-divider-mobile.svg">
      <img src="images/pattern-divider-desktop.svg" alt="">
    </picture>
    <button id="adviceButton" onclick="fetchAdvice()"><img src="images/icon-dice.svg" alt="dice"></button>
  </main>
  
  <footer class="attribution">
    Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>.
    Coded by <a href="https://www.frontendmentor.io/profile/EstelleRoges">EstelleR</a>.
  </footer>

  <script>
    let adviceId = document.getElementById("adviceId");
    let advice = document.getElementById("advice");
    let button = document.getElementById("adviceButton");

    const fetchAdvice = () => {
      fetch("https://api.adviceslip.com/advice").then(function (response) {
        return response.json();
      }).then(function (data) {
        adviceId.innerHTML = data.slip.id;
        advice.innerText = data.slip.advice;
        advice.classList.add("fadeIn");
        
        button.addEventListener('click', function() {
          button.classList.add("disabled");
        });

        setTimeout(function() {
          advice.classList.remove("fadeIn");
        }, 800);

        setTimeout(function() {
          button.classList.remove("disabled");
          button.style.cursor = "pointer";
        }, 2000);

      }).catch(function (error) {
        console.warn("Failed to get an advice", error);
      });
    }

  </script>
</body>

</html>